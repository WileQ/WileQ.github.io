<!DOCTYPE html>
<html>
<head>
    <title>Brython Python Editor</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.10.6/brython.min.js"></script>
    <style>
        textarea {
            width: 100%;
            height: 200px;
        }
        #output {
            white-space: pre-wrap;
            background: #f4f4f4;
            padding: 10px;
            border: 1px solid #ddd;
        }
        .script-buttons {
            margin-bottom: 10px;
        }
        .script-buttons button {
            margin-right: 10px;
        }
    </style>
</head>
<body onload="brython()">
    <h1>Brython Python Editor</h1>

    <div class="script-buttons">
        <button onclick="loadScript('Boids/main')">Load Script 1</button>
        <button onclick="loadScript('script2')">Load Script 2</button>
        <button onclick="loadScript('script3')">Load Script 3</button>
        <button id="run">Run Code</button>
    </div>

    <textarea id="code">Select a script to load</textarea>
    <br>
    <div id="output"></div>

    <script type="text/javascript">
        // Function to load a script from the server
        function loadScript(scriptName) {
    const scriptPath = `../scripts/${scriptName}.py`; // Adjust path to go up one level
    console.log(`Loading script from: ${scriptPath}`);

    fetch(scriptPath)
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.text();
        })
        .then(scriptContent => {
            document.getElementById('code').value = scriptContent;
        })
        .catch(error => {
            console.error('Error loading script:', error);
            document.getElementById('code').value = 'Error loading script.';
        });
}

    </script>

<script type="text/python">
    from browser import document

    # Custom print function to redirect output to the output div
    def custom_print(*args, sep=' ', end='\n'):
        output_text = sep.join(map(str, args)) + end
        document["output"].text += output_text

    def run_code(event):
        code = document["code"].value
        document["output"].text = ""  # Clear previous output
        try:
            # Override the built-in print function with custom_print
            globals()['print'] = custom_print

            # Execute the code within the global scope
            exec(code, globals(), globals())
        except Exception as e:
            document["output"].text = str(e)

    document["run"].bind("click", run_code)
</script>


</body>
</html>
